
نريد بناء هيكل بسيط لكنه قابل للتوسع يشمل:

public/index.php كبوابة دخول (Front Controller)

src/bootstrap.php لإعداد التطبيق (تجميع المسارات والـ DI)

src/Framework/* لأدوات الـ Framework (Router, Request, Response, App, Middleware)

src/App/* لتطبيقك (Controllers, Views, routes)

autoload عبر PSR-4 (composer)

project-root/
├─ composer.json
├─ public/
│  └─ index.php
├─ src/
│  ├─ bootstrap.php
│  ├─ Framework/
│  │  ├─ App.php
│  │  ├─ Router.php
│  │  ├─ Request.php
│  │  ├─ Response.php
│  │  ├─ MiddlewareInterface.php
│  │  └─ Dispatcher.php
│  └─ App/
│     ├─ Controllers/
│     │  └─ HomeController.php
│     └─ routes.php
└─ vendor/

Request → index.php → bootstrap → App → Router → Controller → Response
لنأخذ مثالًا عميقًا وبسيطًا

تخيّلي أنكِ في معرض كبير.
الناس يدخلون من باب واحد فقط.

شخص يريد الذهاب لقسم الكتب.
شخص يريد قسم الإلكترونيات.
شخص يريد مكتب الإدارة.

لكن مهما كان هدفهم…
الطريق دائمًا يبدأ من نفس الباب.

هذا بالضبط موقع الويب.

الباب = public/index.php

هذا الملف دائمًا هو البداية.

هو لا يحلّ مشاكل
هو فقط “يفتح الباب للزائر”.

بعد الباب… من يستقبل الزائر؟
الموظف المنظّم = bootstrap

هذا فتى الاستقبال الذكي.

وظيفته:

• يشغّل النظام
• يحمّل الكلاسات
• يحضّر البيئة
• ينشئ كائن التطبيق (App)

هو ليس المطعم
هو فقط الشخص الذي يرتّب كل شيء قبل بدء العمل.

الآن يدخل الشخص إلى المسؤول الحقيقي
مدير العمليات = App

هذا هو مركز التحكم.

App يستلم الطلب ويسأل:

“إلى أين يجب أن يذهب هذا الزائر؟
ومن سيتكفل به؟”

لكنه لا يعرف بنفسه.
لذلك يتصل بصديقه الذي يعرف كل الطرق.

صديق الطرق = Router

الـ Router هو الشخص الذي يحمل خريطة ضخمة:

"/" → صفحة البيت
"/about" → صفحة التعريف
"/login" → صفحة تسجيل الدخول
"/dashboard" → لوحة التحكم

كلما جاء زائر، يقول له App:

“هذا يريد /login… دلّني ماذا أفعل”

الراوتر يجيب:

“أرسله إلى LoginController → method show()”

من بعد الراوتر… يظهر الشيف
الشيف = Controller

هذا الشخص يطبخ الصفحة المطلوبة.

يقول:

“أوه… طلبوا صفحة login
حسنًا، أرجع لهم login.php أو login.html”

المخرج النهائي = Response

controller يعطي النتيجة
App يعرضها
المتصفّح يشاهدها

الزائر يطرق الباب → index.php
الباب ينادي المنسق → bootstrap
المنسق يشغّل النظام → App
App يسأل خرائط الطرق → Router
Router يحدّد الشيف → Controller
Controller يرجع الطبخة → Response